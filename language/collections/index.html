<!DOCTYPE html>
<html>
	<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	<title> Collections &middot; The OOC Manual </title>
	
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/reset.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/text.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/color.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/layout.css">
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://oocmanual.cogneco.com/apple-touch-icon-144-precomposed.png">
	<link rel="shortcut icon" href="http://oocmanual.cogneco.com/favicon.ico">
	
	<link href="" rel="alternate" type="application/rss+xml" title="The OOC Manual" />
</head>

	<body>
		<header>
  <h1><a href="http://oocmanual.cogneco.com">The OOC Manual</a></h1>
  <p></p>
</header>

		<nav>
	<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/introduction">Introduction</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language">Language</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/modules">Modules</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/values">Values</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/tuples">Tuples</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/control-structures">Control Structures</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/collections">Collections</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/functions">Functions</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/first-class-functions">First-class Functions</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/classes">Classes</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/constructors">Constructors</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/properties">Properties</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/operators">Operators</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/covers">Covers</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/covers-vs-classes">Covers vs Classes</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/enumerations">Enumerations</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/generics">Generics</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/generics2">Generics 2</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/exceptions">Exceptions</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/preprocessor">Preprocessor</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/version-blocks">Version</a>
		
	</li>
	
</ul>


		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools">Tools</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock">Rock</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/basic">Basic Usage</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/drivers">Drivers</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/advanced">Advanced Usage</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/use-files">Use-files</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/use-files2">Use-files 2</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/gc">Garbage Collection</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/debug">Debugging</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/packaging">Packaging</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/sam">Sam</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/editors">Editors</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/troubleshooting">Troubleshooting</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk">sdk</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang">lang</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/types">types</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/string">string</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/numbers">numbers</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/iterators">iterators</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/exceptions">exception</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/memory">memory</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/structs">structs</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/io">io</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/math">math</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os">os</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/process">process</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/jobpool">jobpool</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/coro">coro</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/terminal">terminal</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/pipe">pipe</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/dynlib">dynlib</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/mmap">mmap</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/channel">channel</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/system">system</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/env">env</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/shellutils">shellutils</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/time">time</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/net">net</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/text">text</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/threading">threading</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/native">native</a>
		
	</li>
	
</ul>


		
	</li>
	
</ul>


</nav>


		<main>
			<header>
				<h1>Collections</h1>
			</header>
			<nav id="TableOfContents">
<ul>
<li><a href="#toc_0">Foreword</a></li>
<li><a href="#toc_1">C arrays</a>
<ul>
<li><a href="#toc_2">On the heap</a></li>
<li><a href="#toc_3">On the stack</a></li>
</ul></li>
<li><a href="#toc_4">ooc arrays</a></li>
<li><a href="#toc_5">ArrayList</a>
<ul>
<li><a href="#toc_6">Array-like usage</a></li>
<li><a href="#toc_7">Foreach usage</a></li>
<li><a href="#toc_8">Iterator usage</a></li>
<li><a href="#toc_9">Generics usage</a></li>
<li><a href="#toc_10">Literals</a></li>
</ul></li>
<li><a href="#toc_11">Others</a></li>
</ul>
</nav>
			<article>
				

<h1 id="toc_0">Foreword</h1>

<p>The array situation in ooc is a bit delicate right now - while
I (Amos) am definitely not happy with it, I am still going to
document the current state of things, if only as a motivation to
make it better.</p>

<h1 id="toc_1">C arrays</h1>

<h2 id="toc_2">On the heap</h2>

<p>C arrays are really just pointers:</p>

<pre><code>#!ooc
tenInts := gc_malloc(10 * Int size) as Int*
for (i in 0..10) {
  tenInts[i] = i
}
printInts(tenInts, 10)

printInts: func (arr: Int*, length: Int) {
  for (i in 0..length) {
    &quot;%d&quot; printfln(arr[i])
  }
}
</code></pre>

<h2 id="toc_3">On the stack</h2>

<p>Above, we are calling <code>gc_malloc</code> to allocate a block of GC-managed
memory on the heap. If for some reason a stack-allocated C array
is desirable, this syntax will work:</p>

<pre><code>#!ooc
tenInts: Int[10]
for (i in 0..10) {
  tenInts[i] = i
}
printInts(tenInts[0]&amp;, 10)

printInts: func (arr: Int*, length: Int) {
  for (i in 0..length) {
    &quot;%d&quot; printfln(arr[i])
  }
}
</code></pre>

<h1 id="toc_4">ooc arrays</h1>

<p>ooc arrays are more convenient / safer than C arrays because they:</p>

<ul>
<li>hold the length (number of elements)</li>
<li>do bounds checking when accessing / writing to them</li>
</ul>

<p>The syntax is as follows:</p>

<pre><code>#!ooc
tenInts := Int[10] new()
for (i in 0..10) {
  tenInts[i] = i
}
printInts(tenInts)

printInts: func (arr: Int[]) {
  for (i in 0..arr length) {
    &quot;%d&quot; printfln(arr[i])
  }
}
</code></pre>

<h1 id="toc_5">ArrayList</h1>

<p>ArrayList is not technically part of the language - it is usually available in
the ooc SDK. Its advantages over ooc arrays are:</p>

<ul>
<li>you can accept an <code>ArrayList&lt;T&gt;</code> for any <code>T</code></li>
<li>you can query the <code>T</code> of an ArrayList (ie. match the type)</li>
<li>you can add and remove elements anywhere in the list
(whereas arrays are fixed-length)</li>
</ul>

<h2 id="toc_6">Array-like usage</h2>

<p>They can be used with array-like operators:</p>

<pre><code>#!ooc
import structs/ArrayList

tenInts := ArrayList&lt;Int&gt; new()
for (i in 0..10) {
  tenInts add(i)
}
printInts(tenInts)

printInts: func (list: ArrayList&lt;Int&gt;) {
  for (i in 0..list size) {
    &quot;%d&quot; printfln(list[i])
  }
}
</code></pre>

<h2 id="toc_7">Foreach usage</h2>

<p>The <code>printInts</code> method above can be rewritten using a
foreach to iterate over the list&rsquo;s elements:</p>

<pre><code>#!ooc
printInts: func (list: ArrayList&lt;Int&gt;) {
  for (i in list) {
    &quot;%d&quot; printfln(i)
  }
}
</code></pre>

<h2 id="toc_8">Iterator usage</h2>

<p>Let&rsquo;s say we want to remove every odd number from the list.</p>

<p>Since we are modifying it while iterating through it, the best
device for that is an iterator:</p>

<pre><code>#!ooc
removeOdds: func (list: ArrayList&lt;Int&gt;) {
  iter := list iterator()
  while (iter hasNext?()) {
    if (iter next() % 2 == 1) {
      // removes the element we just got.
      // NOTE: we are calling it on the iterator,
      // not on the list itself.
      iter remove()
    }
  }
}
</code></pre>

<h2 id="toc_9">Generics usage</h2>

<p>Example usage of <a href="/docs/lang/generics/">generics</a>:</p>

<pre><code>#!ooc
import structs/ArrayList

printList(ArrayList&lt;Int&gt; new())
printList(ArrayList&lt;String&gt; new())

printList: func &lt;T&gt; (list: ArrayList&lt;T&gt;) {
  &quot;Got a list of %s&quot; printfln(list T name)
}
</code></pre>

<p>In this case, <code>list T</code> is just a <a href="/docs/lang/classes/#classes">class</a>.</p>

<h2 id="toc_10">Literals</h2>

<p>Simple array literals will give ooc arrays:</p>

<pre><code>#!ooc
tenInts := [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
printInts(tenInts)

printInts: func (arr: Int[]) {
  for (i in 0..arr length) {
    &quot;%d&quot; printfln(arr[i])
  }
}
</code></pre>

<p>Specifying the type the array literal is supposed to be allows
C array literals:</p>

<pre><code>#!ooc
tenInts := [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] as Int*
printInts(tenInts, 10)

printInts: func (arr: Int*, length: Int) {
  for (i in 0..length) {
    &quot;%d&quot; printfln(arr[i])
  }
}
</code></pre>

<p>In the same fashion, ArrayList literals exist:</p>

<pre><code>#!ooc
import structs/ArrayList

tenInts := [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] as ArrayList&lt;Int&gt;
printInts(tenInts)

printInts: func (list: ArrayList&lt;Int&gt;) {
  for (elem in list) {
    &quot;%d&quot; printfln(elem)
  }
}
</code></pre>

<h1 id="toc_11">Others</h1>

<p>The ooc sdk is full of other data structures, such as <code>LinkedList</code>,
<code>HashMap</code> (an dictionary associating keys and values), etc.</p>

<p>For more information, read up on the <a href="/docs/sdk/structs/">structs package</a>.</p>

			</article>
		</main>
		<footer>
  <p></p>
</footer>

	</body>
</html>
