<!DOCTYPE html>
<html>
	<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	<title> Classes &middot; The OOC Manual </title>
	
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/reset.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/text.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/color.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/layout.css">
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://oocmanual.cogneco.com/apple-touch-icon-144-precomposed.png">
	<link rel="shortcut icon" href="http://oocmanual.cogneco.com/favicon.ico">
	
	<link href="" rel="alternate" type="application/rss+xml" title="The OOC Manual" />
</head>

	<body>
		<header>
  <h1><a href="http://oocmanual.cogneco.com">The OOC Manual</a></h1>
  <p></p>
</header>

		<nav>
	<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/introduction">Introduction</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/installing">Installing</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language">Language</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/modules">Modules</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/values">Values</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/tuples">Tuples</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/control-structures">Control Structures</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/collections">Collections</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/functions">Functions</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/first-class-functions">First-class Functions</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/classes">Classes</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/constructors">Constructors</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/properties">Properties</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/operators">Operators</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/interfaces">Interfaces</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/covers">Covers</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/covers-vs-classes">Covers vs Classes</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/enumerations">Enumerations</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/generics">Generics</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/generics2">Generics 2</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/exceptions">Exceptions</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/preprocessor">Preprocessor</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/version-blocks">Version</a>
		
	</li>
	
</ul>


		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk">sdk</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang">lang</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/types">types</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/string">string</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/numbers">numbers</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/iterators">iterators</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/exceptions">exception</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/memory">memory</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/structs">structs</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/io">io</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/math">math</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os">os</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/process">process</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/jobpool">jobpool</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/coro">coro</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/terminal">terminal</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/pipe">pipe</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/dynlib">dynlib</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/mmap">mmap</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/channel">channel</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/system">system</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/env">env</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/shellutils">shellutils</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/time">time</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/net">net</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/text">text</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/threading">threading</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/native">native</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools">Tools</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock">Rock</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/basic">Basic Usage</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/drivers">Drivers</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/advanced">Advanced Usage</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/use-files">Use-files</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/use-files2">Use-files 2</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/gc">Garbage Collection</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/debug">Debugging</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/packaging">Packaging</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/sam">Sam</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/editors">Editors</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/troubleshooting">Troubleshooting</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/glossary">Glossary</a>
		
	</li>
	
</ul>


</nav>


		<main>
			<header>
				<h1>Classes</h1>
			</header>
			<nav id="TableOfContents">
<ul>
<li><a href="#toc_0">Defining classes</a></li>
<li><a href="#toc_1">Members</a>
<ul>
<li><a href="#toc_2">Built-in members</a></li>
<li><a href="#toc_3">Static members</a></li>
<li><a href="#toc_4">Properties</a></li>
</ul></li>
<li><a href="#toc_5">Methods</a>
<ul>
<li><a href="#toc_6">this and This</a></li>
<li><a href="#toc_7">Static methods</a></li>
</ul></li>
<li><a href="#toc_8">Constructors</a>
<ul>
<li><a href="#toc_9">Initializers</a></li>
</ul></li>
<li><a href="#toc_10">Inheritance</a>
<ul>
<li><a href="#toc_11">Extends</a></li>
<li><a href="#toc_12">Super</a></li>
<li><a href="#toc_13">Class hierarchy</a></li>
</ul></li>
<li><a href="#toc_14">Adding methods after definition</a></li>
</ul>
</nav>
			<article>
				

<h1 id="toc_0">Defining classes</h1>

<p>Define classes with the <code>class</code> keyword:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Dog</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">name:</span> <span style="color: #a6e22e">String</span>
  <span style="color: #f8f8f2">race:</span> <span style="color: #a6e22e">Race</span>

  <span style="color: #f8f8f2">init:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">name,</span> <span style="color: #f92672">=</span><span style="color: #f8f8f2">race)</span>
  <span style="color: #f8f8f2">bark:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">{</span> <span style="color: #e6db74">&quot;Woof!&quot;</span> <span style="color: #a6e22e">println</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>Then, call <code>new</code> on it to make an instance of it:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #f8f8f2">dog</span> <span style="color: #f92672">:=</span> <span style="color: #a6e22e">Dog</span> <span style="color: #66d9ef">new</span><span style="color: #f8f8f2">()</span>
</pre></div>

<p>An instance of a class is also called an object.</p>

<h1 id="toc_1">Members</h1>

<p>Members are variables tied to an instance:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Dog</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #75715e">// declare a field named &#39;name&#39;</span>
  <span style="color: #f8f8f2">name:</span> <span style="color: #a6e22e">String</span>

  <span style="color: #f8f8f2">init:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">name)</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">d1</span> <span style="color: #f92672">:=</span> <span style="color: #a6e22e">Dog</span> <span style="color: #66d9ef">new</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;Pluty&quot;</span><span style="color: #f8f8f2">)</span>
<span style="color: #f8f8f2">d2</span> <span style="color: #f92672">:=</span> <span style="color: #a6e22e">Dog</span> <span style="color: #66d9ef">new</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;Snoopo&quot;</span><span style="color: #f8f8f2">)</span>

<span style="color: #e6db74">&quot;d1&#39;s name is = %s&quot;</span> <span style="color: #a6e22e">printfln</span><span style="color: #f8f8f2">(d1</span> <span style="color: #f8f8f2">name)</span>
<span style="color: #e6db74">&quot;d2&#39;s name is = %s&quot;</span> <span style="color: #a6e22e">printfln</span><span style="color: #f8f8f2">(d2</span> <span style="color: #f8f8f2">name)</span>
</pre></div>

<h2 id="toc_2">Built-in members</h2>

<p>There are a few members always available on classes. You can access the
class of any object via the <code>class</code> member. For example:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #75715e">// will be equal to &#39;Dog&#39;</span>
<span style="color: #f8f8f2">dog</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">name</span>

<span style="color: #75715e">// since objects are reference, will be the size of a pointer</span>
<span style="color: #f8f8f2">dog</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">size</span>

<span style="color: #75715e">// the actual size of a dog object, including members</span>
<span style="color: #f8f8f2">dog</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">instanceSize</span>
</pre></div>

<h2 id="toc_3">Static members</h2>

<p>Static members belong to a class, rather than to an instance.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Node</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">count:</span> <span style="color: #66d9ef">static</span> <span style="color: #a6e22e">Int</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">0</span>

  <span style="color: #f8f8f2">init:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #a6e22e">This</span> <span style="color: #f8f8f2">count</span> <span style="color: #f92672">+=</span> <span style="color: #ae81ff">1</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(i</span> <span style="color: #66d9ef">in</span> <span style="color: #ae81ff">0</span><span style="color: #f92672">..</span><span style="color: #ae81ff">10</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #a6e22e">Node</span> <span style="color: #66d9ef">new</span><span style="color: #f8f8f2">()</span>
<span style="color: #f8f8f2">}</span>
<span style="color: #e6db74">&quot;Number of nodes: %d&quot;</span> <span style="color: #a6e22e">printfln</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">Node</span> <span style="color: #f8f8f2">count)</span>
</pre></div>

<p>In the code above, <code>count</code> is &ldquo;shared&rdquo; among all instances of node - hence,
incrementing it in the constructor will be &ldquo;remembered&rdquo; the next time a node
is created. So, we really are counting the number of nodes being created.</p>

<p>Static fields can also be accessed without explicitly referring to <code>This</code>.
The declare-assignment operator, <code>:=</code>, also works with the <code>static</code> keyword before
the right-hand-side value:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Node</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">count</span> <span style="color: #f92672">:=</span> <span style="color: #66d9ef">static</span> <span style="color: #ae81ff">0</span>

  <span style="color: #f8f8f2">init:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">count</span> <span style="color: #f92672">+=</span> <span style="color: #ae81ff">1</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #75715e">// etc.</span>
</pre></div>

<h2 id="toc_4">Properties</h2>

<p>The shortest and sweetest way to define a property is to use the <code>::=</code> operator:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Rectangle</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">width,</span> <span style="color: #f8f8f2">height:</span> <span style="color: #a6e22e">Int</span>
  <span style="color: #f8f8f2">area</span> <span style="color: #f8f8f2">:</span><span style="color: #f92672">:=</span> <span style="color: #f8f8f2">width</span> <span style="color: #f92672">*</span> <span style="color: #f8f8f2">height</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>Contrary to a variable declaration, the value of <code>area</code> will be
recomputed every time it is being accessed. Contrary to a function
call, one does not need parenthesis to call its getter, nor can it
pass any argument.</p>

<p>Properties are mostly useful as shorthands for an expression that
is often computed, but that would be overkill as a method.</p>

<p>In the technical jargon, we say that properties are, <code>virtual</code>
members that exist as read-only, write-only, or read-write behind
getters and setters.</p>

<p>Here&rsquo;s an example of long-form, read-only property:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Person</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">lastName,</span> <span style="color: #f8f8f2">firstName:</span> <span style="color: #a6e22e">String</span>

  <span style="color: #f8f8f2">fullName:</span> <span style="color: #a6e22e">String</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">get</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #e6db74">&quot;%s %s&quot;</span> <span style="color: #a6e22e">format</span><span style="color: #f8f8f2">(lastName,</span> <span style="color: #f8f8f2">firstName)</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>Note that when specifying a getter, one does not need a return type,
as it is the type of the property itself.</p>

<p>Similarly, when specifying a setter, one only needs an argument name
not its type:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Person</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">lastName,</span> <span style="color: #f8f8f2">firstName:</span> <span style="color: #a6e22e">String</span>

  <span style="color: #f8f8f2">name:</span> <span style="color: #a6e22e">String</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #a6e22e">set</span> <span style="color: #f8f8f2">(name)</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">tokens</span> <span style="color: #f92672">:=</span> <span style="color: #f8f8f2">name</span> <span style="color: #a6e22e">split</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot; &quot;</span><span style="color: #f8f8f2">)</span>
      <span style="color: #a6e22e">assert</span><span style="color: #f8f8f2">(tokens</span> <span style="color: #f8f8f2">size</span> <span style="color: #f92672">==</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">)</span>
      <span style="color: #f8f8f2">(firstName,</span> <span style="color: #f8f8f2">lastName)</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">(tokens[</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">],</span> <span style="color: #f8f8f2">tokens[</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">])</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>Empty getters and setters are valid as well, for a simple read-write property:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Person</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">name:</span> <span style="color: #a6e22e">String</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">get</span> <span style="color: #f8f8f2">set</span> <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>The advantage is the following - since a property is only accessed via its
getters and setters, which are methods, changing the structure of the <code>Person</code>
class will not necessarily trigger a recompile on the modules which use it,
nor will they need to explicitly import that module, if they get a <code>Person</code> instance
from somewhere else.</p>

<p>This is a way to work around what is known as the <a href="fragile">Fragile Base Class Problem</a>.</p>

<h1 id="toc_5">Methods</h1>

<p>Methods are function declarations in the class body, that are called
on a particular instance:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Dog</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">bark:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #e6db74">&quot;Woof!&quot;</span> <span style="color: #a6e22e">println</span><span style="color: #f8f8f2">()</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">dog</span> <span style="color: #f92672">:=</span> <span style="color: #a6e22e">Dog</span> <span style="color: #66d9ef">new</span><span style="color: #f8f8f2">()</span>
<span style="color: #f8f8f2">dog</span> <span style="color: #a6e22e">bark</span><span style="color: #f8f8f2">()</span>
</pre></div>

<h2 id="toc_6">this and This</h2>

<p>In a method, the special variable <code>this</code> is accessible, and refers to the object
the method is being called on.</p>

<p>Example usage of <code>this</code></p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Building</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">height:</span> <span style="color: #a6e22e">Int</span>

  <span style="color: #75715e">// argument name shadows member name</span>
  <span style="color: #f8f8f2">setHeight:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">(height:</span> <span style="color: #a6e22e">Int</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(height</span> <span style="color: #f92672">&lt;</span> <span style="color: #ae81ff">0</span> <span style="color: #f92672">||</span> <span style="color: #f8f8f2">height</span> <span style="color: #f92672">&gt;</span> <span style="color: #ae81ff">300</span><span style="color: #f8f8f2">)</span> <span style="color: #66d9ef">return</span>

    <span style="color: #75715e">// using `this` explicitly to differenciate them</span>
    <span style="color: #66d9ef">this</span> <span style="color: #f8f8f2">height</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">height</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p><code>This</code>, on the other hand, refers to the type currently being defined:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Engine</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">logger</span> <span style="color: #f92672">:=</span> <span style="color: #a6e22e">Log</span> <span style="color: #a6e22e">getLogger</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">This</span> <span style="color: #f8f8f2">name)</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>In the example above, we are using the name of the class we are currently defining,
instead of typing out <code>&quot;Engine&quot;</code> directly — that way, if we rename the class, the
code will still be valid. It&rsquo;s a good way to <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">avoid repeating yourself</a>.</p>

<h2 id="toc_7">Static methods</h2>

<p>Static methods also belong to a specific class, but they&rsquo;re not tied to
a particular instance. Hence, you don&rsquo;t have access to <code>this</code> in a static
method because it&rsquo;s not called on an instance:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Map</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">tiles</span> <span style="color: #f92672">:=</span> <span style="color: #a6e22e">Map</span><span style="color: #f92672">&lt;</span><span style="color: #a6e22e">Tile</span><span style="color: #f92672">&gt;</span> <span style="color: #66d9ef">new</span><span style="color: #f8f8f2">()</span>

  <span style="color: #f8f8f2">generate:</span> <span style="color: #66d9ef">static</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">(width,</span> <span style="color: #f8f8f2">height:</span> <span style="color: #a6e22e">Int</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">-&gt;</span> <span style="color: #a6e22e">This</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">m</span> <span style="color: #f92672">:=</span> <span style="color: #a6e22e">This</span> <span style="color: #66d9ef">new</span><span style="color: #f8f8f2">()</span>
    <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(y</span> <span style="color: #66d9ef">in</span> <span style="color: #ae81ff">0</span><span style="color: #f92672">..</span><span style="color: #f8f8f2">height)</span> <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(x</span> <span style="color: #66d9ef">in</span> <span style="color: #ae81ff">0</span><span style="color: #f92672">..</span><span style="color: #f8f8f2">width)</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">m</span> <span style="color: #a6e22e">addTile</span><span style="color: #f8f8f2">(x,</span> <span style="color: #f8f8f2">y)</span>
    <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">m</span>
  <span style="color: #f8f8f2">}</span>

  <span style="color: #f8f8f2">addTile:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">(x,</span> <span style="color: #f8f8f2">y:</span> <span style="color: #a6e22e">Int</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span> <span style="color: #75715e">/* ... */</span> <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>In some languages, <code>new</code> is a keyword used to create objects. In ooc,
it&rsquo;s just a static method doing some allocation and initialization, and
returning a new instance. See &ldquo;Constructors&rdquo; for more details.</p>

<h1 id="toc_8">Constructors</h1>

<p>Define the <code>init</code> method (with a suffix to have different constructors), and
a <code>new</code> static method will get defined automatically.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Dog</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">name:</span> <span style="color: #a6e22e">String</span>

  <span style="color: #f8f8f2">init:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">name)</span>
  <span style="color: #f8f8f2">init:</span> <span style="color: #66d9ef">func</span> <span style="color: #a6e22e">~default</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">name</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;Fido&quot;</span> <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>For alternative instantiation strategies, defining a custom, static <code>new</code>
method, returning an instance of type <code>This</code>, works just as well:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Dog</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">pool</span> <span style="color: #f92672">:=</span> <span style="color: #66d9ef">static</span> <span style="color: #a6e22e">Stack</span><span style="color: #f92672">&lt;</span><span style="color: #a6e22e">This</span><span style="color: #f92672">&gt;</span> <span style="color: #66d9ef">new</span><span style="color: #f8f8f2">()</span>

  <span style="color: #66d9ef">new</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">static</span> <span style="color: #66d9ef">func</span> <span style="color: #f92672">-&gt;</span> <span style="color: #a6e22e">This</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(pool</span> <span style="color: #f8f8f2">empty</span><span style="color: #f92672">?</span><span style="color: #f8f8f2">())</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">obj</span> <span style="color: #f92672">:=</span> <span style="color: #a6e22e">This</span> <span style="color: #a6e22e">alloc</span><span style="color: #f8f8f2">()</span>
      <span style="color: #f8f8f2">obj</span> <span style="color: #ae81ff">__</span><span style="color: #a6e22e">defaults__</span><span style="color: #f8f8f2">()</span>
      <span style="color: #f8f8f2">obj</span>
    <span style="color: #f8f8f2">}</span> <span style="color: #66d9ef">else</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">pool</span> <span style="color: #a6e22e">pop</span><span style="color: #f8f8f2">()</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">}</span>

  <span style="color: #f8f8f2">free:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">pool</span> <span style="color: #a6e22e">push</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">this</span><span style="color: #f8f8f2">)</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>We can clearly see that the <code>alloc</code> static method here does memory allocation
for the object, but what about <code>__defaults__</code>? It contains initializers, discussed
in the next section.</p>

<h2 id="toc_9">Initializers</h2>

<p>We&rsquo;ve discussed methods, but not all code that belong to a class is in an explicit
method. For example, in this code, declaration and initialization are clearly separate:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Group</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">number:</span> <span style="color: #a6e22e">Int</span>

  <span style="color: #f8f8f2">init:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">number</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">42</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>But what happens with the following code?</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Group</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">number</span> <span style="color: #f92672">:=</span> <span style="color: #ae81ff">42</span>

  <span style="color: #f8f8f2">init:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>The resulting executable does the same. The class contains a field
of type Int, initially equal to 0, but there&rsquo;s an implicit <code>__defaults__</code>
method that contains all code outside of a method, that gets executed before
the <code>init</code> method is called.</p>

<p>Above, the example is a pattern you&rsquo;ll see often - however, one can put
any amount of code directly in the class declaration:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Dog</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #e6db74">&quot;You made a dog!&quot;</span> <span style="color: #a6e22e">println</span><span style="color: #f8f8f2">()</span>
    <span style="color: #f8f8f2">init:</span> <span style="color: #66d9ef">func</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>Every time <code>Dog new()</code> is called, the <code>&quot;You made a dog!&quot;</code> string will get
printed.</p>

<h1 id="toc_10">Inheritance</h1>

<h2 id="toc_11">Extends</h2>

<p>Simple inheritance is achieved through the <code>extends</code> keyword:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">Animal</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{}</span>
<span style="color: #a6e22e">Dog</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #66d9ef">extends</span> <span style="color: #a6e22e">Animal</span> <span style="color: #f8f8f2">{}</span>
</pre></div>

<p>In this case, an instance of <code>Dog</code> will also be an instance of <code>Animal</code>,
and it inherits all its methods and members.</p>

<p>For example, a function expecting an <code>Animal</code> can be passed a <code>Dog</code> instead.
That is, if your code is designed correctly. For some encyclopedic knowledge
on the matter, check out the <a href="http://en.wikipedia.org/wiki/Liskov_substitution_principle">Liskov Substition Principle</a></p>

<h2 id="toc_12">Super</h2>

<p>Calling <code>super</code> will call the definition of a method in the super-class.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">SimpleApp</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">init:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #a6e22e">loadConfig</span><span style="color: #f8f8f2">()</span>
  <span style="color: #f8f8f2">}</span>

  <span style="color: #75715e">// ...</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #a6e22e">NetworkedApp</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #66d9ef">extends</span> <span style="color: #a6e22e">SimpleApp</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">init:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">super</span><span style="color: #f8f8f2">()</span>
    <span style="color: #a6e22e">initNetworking</span><span style="color: #f8f8f2">()</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>When one just wants to relay a constructor, one can use <code>super func</code>:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">MyException</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #66d9ef">extends</span> <span style="color: #a6e22e">Exception</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">init:</span> <span style="color: #66d9ef">super</span> <span style="color: #66d9ef">func</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>Which is equivalent to the following:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">MyException</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">class</span> <span style="color: #66d9ef">extends</span> <span style="color: #a6e22e">Exception</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">init:</span> <span style="color: #66d9ef">func</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">super</span><span style="color: #f8f8f2">()</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p><code>super func</code> can take a suffix, and it relays argument as well. It is useful
when you really don&rsquo;t have much more to do in the constructor of the sub-class.</p>

<p>Please bear in mind that <code>super func</code> is relatively hackish - it is documented
here for completeness sake, but it is more of a rapid coding trick than a good
practice, really.</p>

<h2 id="toc_13">Class hierarchy</h2>

<p>The class hierarchy can be explored via built-in members and methods on objects
and classes:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #75715e">// in this case, the Object class - otherwise, whatever super class it has dog class super</span>

<span style="color: #75715e">// evaluates to true</span>
<span style="color: #f8f8f2">dog</span> <span style="color: #f8f8f2">instanceOf</span><span style="color: #f92672">?</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">Dog</span><span style="color: #f8f8f2">)</span>

<span style="color: #75715e">// also evaluates to true</span>
<span style="color: #f8f8f2">dog</span> <span style="color: #f8f8f2">instanceOf</span><span style="color: #f92672">?</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">Object</span><span style="color: #f8f8f2">)</span>

<span style="color: #75715e">// evaluates to false</span>
<span style="color: #f8f8f2">dog</span> <span style="color: #f8f8f2">instanceOf</span><span style="color: #f92672">?</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">Cat</span><span style="color: #f8f8f2">)</span>
</pre></div>

<p>The equivalent of <code>instanceOf?</code> called on classes, is <code>inheritsFrom?</code></p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #75715e">// true</span>
<span style="color: #a6e22e">Dog</span> <span style="color: #f8f8f2">inheritsFrom</span><span style="color: #f92672">?</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">Dog</span><span style="color: #f8f8f2">)</span>

<span style="color: #75715e">// true</span>
<span style="color: #a6e22e">Dog</span> <span style="color: #f8f8f2">inheritsFrom</span><span style="color: #f92672">?</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">Object</span><span style="color: #f8f8f2">)</span>

<span style="color: #75715e">// false</span>
<span style="color: #a6e22e">Dog</span> <span style="color: #f8f8f2">inheritsFrom</span><span style="color: #f92672">?</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">Cat</span><span style="color: #f8f8f2">)</span>
</pre></div>

<h1 id="toc_14">Adding methods after definition</h1>

<p>This applies to classes, covers, and enums alike. The <code>extend</code>
keyword can add superficial methods to any type, even if it is
defined in another module.</p>

<p>It is useful to add convenience methods of your own without having
to modify the original library.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #f8f8f2">extend</span> <span style="color: #a6e22e">Float</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">negated:</span> <span style="color: #66d9ef">func</span> <span style="color: #f92672">-&gt;</span> <span style="color: #a6e22e">This</span> <span style="color: #f8f8f2">{</span> <span style="color: #f92672">-</span><span style="color: #66d9ef">this</span> <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">-</span><span style="color: #ae81ff">3.14</span> <span style="color: #f92672">==</span> <span style="color: #ae81ff">3.14</span> <span style="color: #a6e22e">negated</span><span style="color: #f8f8f2">())</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #e6db74">&quot;Everything is fine&quot;</span> <span style="color: #a6e22e">println</span><span style="color: #f8f8f2">()</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>Virtual properties (that do not correspond to a real instance variable,
but rather compute their value from other information everytime) can also
be added in an <code>extend</code> block:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #f8f8f2">extend</span> <span style="color: #a6e22e">Int</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">plusFive:</span> <span style="color: #a6e22e">This</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">get</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">this</span> <span style="color: #f92672">+</span> <span style="color: #ae81ff">5</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

<p>See the <a href="#properties">Properties</a> section for more info on properties.</p>

			</article>
			<footer>
				<p><span id="footer-copyright">2009-2014 Amos Wenger</span><span id="footer-license">CC BY-SA 3.0</span></p>
			</footer>
		</main>
		<footer>
  <p></p>
</footer>

	</body>
</html>
