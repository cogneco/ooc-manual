<!DOCTYPE html>
<html>
	<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	<title> Preprocessor &middot; The OOC Manual </title>
	
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/reset.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/text.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/color.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/layout.css">
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://oocmanual.cogneco.com/apple-touch-icon-144-precomposed.png">
	<link rel="shortcut icon" href="http://oocmanual.cogneco.com/favicon.ico">
	
	<link href="" rel="alternate" type="application/rss+xml" title="The OOC Manual" />
</head>

	<body>
		<header>
  <h1><a href="http://oocmanual.cogneco.com">The OOC Manual</a></h1>
  <p></p>
</header>

		<nav>
	<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/introduction/">Introduction</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/installing/">Installing</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/">Language</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/modules/">Modules</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/values/">Values</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/tuples/">Tuples</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/control-structures/">Control Structures</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/collections/">Collections</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/functions/">Functions</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/first-class-functions/">First-class Functions</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/classes/">Classes</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/constructors/">Constructors</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/properties/">Properties</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/operators/">Operators</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/interfaces/">Interfaces</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/covers/">Covers</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/covers-vs-classes/">Covers vs Classes</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/enumerations/">Enumerations</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/generics/">Generics</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/generics2/">Generics 2</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/exceptions/">Exceptions</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/preprocessor/">Preprocessor</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/version-blocks/">Version</a>
		
	</li>
	
</ul>

		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/">sdk</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/">lang</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/types/">types</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/string/">string</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/numbers/">numbers</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/iterators/">iterators</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/exceptions/">exception</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/memory/">memory</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/structs/">structs</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/io/">io</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/math/">math</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/">os</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/process/">process</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/jobpool/">jobpool</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/coro/">coro</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/terminal/">terminal</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/pipe/">pipe</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/dynlib/">dynlib</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/mmap/">mmap</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/channel/">channel</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/system/">system</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/env/">env</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/shellutils/">shellutils</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/time/">time</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/net/">net</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/text/">text</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/threading/">threading</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/native/">native</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/">Tools</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/">Rock</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/basic/">Basic Usage</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/drivers/">Drivers</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/advanced/">Advanced Usage</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/use-files/">Use-files</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/use-files2/">Use-files 2</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/gc/">Garbage Collection</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/debug/">Debugging</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/packaging/">Packaging</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/sam/">Sam</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/editors/">Editors</a>
		
	</li>
	
</ul>

		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/troubleshooting/">Troubleshooting</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/glossary/">Glossary</a>
		
	</li>
	
</ul>

</nav>

		<main>
			<header>
				<h1>Preprocessor</h1>
			</header>
			<nav id="TableOfContents">
<ul>
<li><a href="#toc_0">Version blocks</a></li>
<li><a href="#toc_1">Line continuations</a></li>
<li><a href="#toc_2">Constants</a></li>
<li><a href="#toc_3">Call chaining</a></li>
</ul>
</nav>
			<article>
				

<h1 id="toc_0">Version blocks</h1>

<p>Version blocks allows one to write platform-specific code. For example:</p>

<pre><code>#!ooc
runThing: class {
  version (windows) {
    // use CreateProcess ...
    return
  }

  version (!windows) {
    // use something more unix-y
  }
}
</code></pre>

<p>Version blocks support complex binary expressions, like <code>&amp;&amp;</code>, <code>||</code>, <code>!</code>, and
any depth of parenthesis nesting. For example:</p>

<pre><code>#!ooc
version (!(osx || linux)) {
  // not on osx, nor on linux
}
</code></pre>

<p>Available version blocks and their corresponding C defines are as follow:</p>

<table class="pretty">
<tbody>

<tr>
<td>Identifier</td>
<td>Description</td>
</tr>

<tr>
<td>windows</td>
<td>Windows OS, both 32 and 64-bit</td>
</tr>

<tr>
<td>linux</td>
<td>Linux</td>
</tr>

<tr>
<td>solaris</td>
<td>Solaris</td>
</tr>

<tr>
<td>unix</td>
<td>Unices (Apple products do not define this)</td>
</tr>

<tr>
<td>beos</td>
<td>BeOS</td>
</tr>

<tr>
<td>haiku</td>
<td>Haiku (BeOS-like)</td>
</tr>

<tr>
<td>apple</td>
<td>All things apple: iOS, OSX</td>
</tr>

<tr>
<td><em>ios</em></td>
<td>iOS: iPhone, iPad</td>
</tr>

<tr>
<td><em>ios_simulator</em></td>
<td>iOS compiled for the ios simulator</td>
</tr>

<tr>
<td><em>osx</em></td>
<td>Mac OSX (consider using <tt>apple</tt> instead)</td>
</tr>

<tr>
<td>freebsd</td>
<td>FreeBSD</td>
</tr>

<tr>
<td>openbsd</td>
<td>OpenBSD</td>
</tr>

<tr>
<td>netbsd</td>
<td>NetBSD</td>
</tr>

<tr>
<td>dragonfly</td>
<td>DragonFly BSD</td>
</tr>

<tr>
<td>cygwin</td>
<td>Cygwin toolchain</td>
</tr>

<tr>
<td>mingw</td>
<td>MinGW 32 or 64-bit toolchain</td>
</tr>

<tr>
<td>mingw64</td>
<td>MinGW 64-bit toolchain</td>
</tr>

<tr>
<td>gnuc</td>
<td>GCC (GNU C)</td>
</tr>

<tr>
<td>msvc</td>
<td>Microsoft Visual C++</td>
</tr>

<tr>
<td>android</td>
<td>Android toolchain</td>
</tr>

<tr>
<td>arm</td>
<td>ARM processor architecture</td>
</tr>

<tr>
<td>i386</td>
<td>Intel x86 architecture (defined by GNU C)</td>
</tr>

<tr>
<td>x86</td>
<td>Intel x86 architecture (defined by MinGW)</td>
</tr>

<tr>
<td>x86_64</td>
<td>AMD64 architecture</td>
</tr>

<tr>
<td>ppc</td>
<td>PPC architecture</td>
</tr>

<tr>
<td>ppc64</td>
<td>PPC 64-bit architecture</td>
</tr>

<tr>
<td>64</td>
<td>64-bit processor architecture and toolchain</td>
</tr>

<tr>
<td>gc</td>
<td>Garbage Collector activated on compilation</td>
</tr>

</tbody>
</table>

<p>The specs in <em>italics</em> are &ldquo;complex&rdquo; specs - they can&rsquo;t be in a composed version
expression, e.g. this is invalid:</p>

<pre><code>#!ooc
version (64 &amp;&amp; osx) {
    // code here
}
</code></pre>

<p>Consider doing this instead:</p>

<pre><code>#!ooc
version (64) {
    version (osx) {
        // code here
    }
}
</code></pre>

<p>The reason for this is that <code>osx</code>, <code>ios</code>, and <code>ios_simulator</code> are not simple <code>#ifdef</code>s
in the generated code, but they require an include and an equality test.</p>

<h1 id="toc_1">Line continuations</h1>

<p>Any line can be broken down on several lines, by using the backslash character, <code>\</code>,
as a line continuation:</p>

<pre><code>#!ooc
someList \
map(|el| Something new(el))
</code></pre>

<p>If it wasn&rsquo;t for that <code>\</code> before the end of the line, <code>map</code> would be interpreted as
a separate function call, and not a method call.</p>

<h1 id="toc_2">Constants</h1>

<p>Some constants are accessible anywhere and will be replaced at compile time with
strings. Those are:</p>

<ul>
<li><code>__BUILD_DATETIME__</code></li>
<li><code>__BUILD_TARGET__</code></li>
<li><code>__BUILD_ROCK_VERSION__</code></li>
<li><code>__BUILD_ROCK_CODENAME__</code></li>
<li><code>__BUILD_HOSTNAME__</code></li>
</ul>

<h1 id="toc_3">Call chaining</h1>

<p>While not technically a preprocessor feature, the following code:</p>

<pre><code>#!ooc
a := ArrayList&lt;Int&gt; new(). add(1). add(2). add(3)
</code></pre>

<p>Is equivalent to:</p>

<pre><code>#!ooc
a := ArrayList&lt;Int&gt; new()
a add(1). add(2). add(3)
</code></pre>

<p>Itself equivalent to:</p>

<pre><code>#!ooc
a := ArrayList&lt;Int&gt; new()
a add(1)
a add(2)
a add(3)
</code></pre>

			</article>
			<footer>
				<p><span id="footer-copyright">2009-2014 Amos Wenger</span><span id="footer-license">CC BY-SA 3.0</span></p>
			</footer>
		</main>
		<footer>
  <p></p>
</footer>

	</body>
</html>
