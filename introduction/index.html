<!DOCTYPE html>
<html>
	<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	<title> Introduction &middot; The OOC Manual </title>
	
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/reset.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/text.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/color.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/layout.css">
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://oocmanual.cogneco.com/apple-touch-icon-144-precomposed.png">
	<link rel="shortcut icon" href="http://oocmanual.cogneco.com/favicon.ico">
	
	<link href="" rel="alternate" type="application/rss+xml" title="The OOC Manual" />
</head>

	<body>
		<header>
  <h1><a href="http://oocmanual.cogneco.com">The OOC Manual</a></h1>
  <p></p>
</header>

		<nav>
	<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/introduction">Introduction</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language">Language</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/modules">Modules</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/values">Values</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/tuples">Tuples</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/control-structures">Control Structures</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/collections">Collections</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/functions">Functions</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/first-class-functions">First-class Functions</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/classes">Classes</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/constructors">Constructors</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/properties">Properties</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/operators">Operators</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/covers">Covers</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/covers-vs-classes">Covers vs Classes</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/enumerations">Enumerations</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/generics">Generics</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/generics2">Generics 2</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/exceptions">Exceptions</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/preprocessor">Preprocessor</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/version-blocks">Version</a>
		
	</li>
	
</ul>


		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools">Tools</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock">Rock</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/basic">Basic Usage</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/drivers">Drivers</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/advanced">Advanced Usage</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/use-files">Use-files</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/use-files2">Use-files 2</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/gc">Garbage Collection</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/debug">Debugging</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/packaging">Packaging</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/sam">Sam</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/editors">Editors</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/troubleshooting">Troubleshooting</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk">sdk</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang">lang</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/types">types</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/string">string</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/numbers">numbers</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/iterators">iterators</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/exceptions">exception</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/memory">memory</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/structs">structs</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/io">io</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/math">math</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os">os</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/process">process</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/jobpool">jobpool</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/coro">coro</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/terminal">terminal</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/pipe">pipe</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/dynlib">dynlib</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/mmap">mmap</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/channel">channel</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/system">system</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/env">env</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/shellutils">shellutils</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/time">time</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/net">net</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/text">text</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/threading">threading</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/native">native</a>
		
	</li>
	
</ul>


		
	</li>
	
</ul>


</nav>


		<main>
			<header>
				<h1>Introduction</h1>
			</header>
			<nav id="TableOfContents">
<ul>
<li><a href="#toc_0">Once Upon A Time&hellip;</a></li>
<li><a href="#toc_1">The Great Illusion</a></li>
<li><a href="#toc_2">Form Follows Function</a></li>
<li><a href="#toc_3">Corgi Ever Watching</a></li>
<li><a href="#toc_4">The Littlest Things</a></li>
<li><a href="#toc_5">All Together Now</a></li>
<li><a href="#toc_6">When Features Creep</a></li>
<li><a href="#toc_7">To Give Back</a></li>
</ul>
</nav>
			<article>
				

<h1 id="toc_0">Once Upon A Time&hellip;</h1>

<p>Once upon a time, there was a sysadmin who wanted to make sure her website
was always online. However, she figured that she was pretty good at compiling,
installing, and configuring software, but that her programming skills were a bit
rusty.</p>

<p>Oh, sure, she remembered her days at university where she learned a bit of Java,
and C++, and the cool mind-bending exercises in LISP, but today she felt like trying
something new. She followed the <a href="/install/">installation instructions</a> carefully, and then
jumped in without waiting.</p>

<p>After fishing online for information, she decided to start with the following
program:</p>

<pre><code>#!ooc
&quot;The website may or may not be online.&quot; println()
</code></pre>

<p>Saving it as <code>watchcorgi.ooc</code> and running <code>rock -v watchcorgi</code> sure produced a lot
of output. And - as a token of its appreciation, the compiler even left an executable
on the hard drive. What a promising relationship, she thought.</p>

<p>However, not one to be overly chatty, she decided that instead of having to type
<code>rock watchcorgi</code> every time she wanted to compile her new program, she was going
to write a <a href="/docs/tools/rock/usefiles">usefile</a> for it, and put them both together in a directory.</p>

<pre><code>#!yaml
Name: Watch Corgi
Description: Tells on the bad websites that go down
Version: 0.1.0
SourcePath: source
Main: watchcorgi
</code></pre>

<p>Saving it as <code>watchcorgi.use</code>, she realized that, if she wanted her usefile to be
valid, she needed to move her ooc module into <code>source/watchcorgi.ooc</code>. So then, her
folder hierarchy now looked like:</p>

<pre><code>.
├── source
│   └── watchcorgi.ooc
└── watchcorgi.use
</code></pre>

<p>Now, all she had to do was type <code>rock</code> to have her program compiled. If she felt
like reading a bit, all she had to do was <code>rock -v</code> - it reminded her of the countless
hours spent installing packages on Gentoo.</p>

<h1 id="toc_1">The Great Illusion</h1>

<p>However, that program was not quite as useful as she had hoped so far. While it was
technically correct — the best kind of correct — it did not, in fact, bring any new
information to the table.</p>

<p>That was not meant to last, though, as she quickly devised a devious scheme. Before
the era of watchcorgi, she was using <code>curl</code>, a command-line utility, to check if the
website was still online. It looked a little something like this:</p>

<pre><code>#!bash
curl -I http://example.org/
</code></pre>

<p>(Of course, that wasn&rsquo;t her website&rsquo;s actual URL, which we have sneakingly substituted
with something a tad more common, in order to protect our heroine&rsquo;s privacy.)</p>

<p>Running that simple command was enough to let her know, with a simple look, whether
the website was up and running or down in the ground — in which case prompt maintenance
was needed as soon as humanly possible.</p>

<p>She decided that if she could run that command herself, there was no reason why her
program couldn&rsquo;t do so as well. After a second documentation hunt, she quickly jotted
down a few more lines, replacing the contents of <code>source/watchcorgi.ooc</code> with this:</p>

<pre><code>#!ooc
import os/Process

exitCode := Process new([&quot;curl&quot;, &quot;-I&quot;, &quot;http://example.org/&quot;]) execute()
&quot;Sir Curl exited with: %d&quot; printfln(exitCode)
</code></pre>

<p>And sure enough, after a quick recompilation, she saw the expected result: <code>Sir Curl
exited with: 0</code>. Curious, she disconnected from the internet, and tried launching
<code>./watchcorgi</code> again. This time, she saw: <code>Sir Curl exited with: 6</code>.</p>

<p>&ldquo;It&rsquo;s just like it always is with Unix-like tools&rdquo; she thought. &ldquo;An exit code of 0
is a good sign, anything else&hellip; not so much. It sure is convenient to be able
to import another ooc module for almost everything. Apparently, this <code>Process</code> class
takes an array with the command arguments. And this <code>execute</code> method returns the
exit code. Neato!&rdquo; And so it was.</p>

<h1 id="toc_2">Form Follows Function</h1>

<p>She was starting to be happy with her program. For all intents and purposes, was doing
its job, and it was doing its job well. However, she could not deny that her program
could have put a little more effort in the presentation. Just because a program does
not have a will of its own, doesn&rsquo;t mean it&rsquo;s okay for it to be rude.</p>

<p>&ldquo;Time to get to work&rdquo;, she said out loud, forgetting that it was past 2 in the morning,
and that nobody could probably hear her - and even if they could, there was no
certainty that they would agree. While she thought about that, her fingers had kept
tapping on the keyboard. Her program now looked a little bit like that:</p>

<pre><code>#!ooc
import os/[Process, Terminal]

exitCode := Process new([&quot;curl&quot;, &quot;-I&quot;, &quot;http://example.org/&quot;]) execute()

match (exitCode) {
  case 0 =&gt;
    &quot;Everything is fine.&quot; println()

  case =&gt;
    Terminal setFgColor(Color red)
    &quot;[ERROR] The website is down!&quot; println()
    Terminal reset()
}
</code></pre>

<p>It didn&rsquo;t blink, and there were no 3D effects: disappointing maybe for a sci-fi
fan like her little brother, but having alerts in red, and a human-readable message
was fine enough for her.</p>

<p>While carefully proofreading her code to check if she hadn&rsquo;t missed anything, she
thought about the syntax of the <code>match</code> construct. &ldquo;It&rsquo;s pretty smart, in fact.
Cases are tested from top to bottom - the first that matches, wins. And a case with
no value simply matches everything&rdquo;. It just made sense.</p>

<p>She was also particularly happy with the way she was able to import both <code>os/Process</code>
and <code>os/Terminal</code> from the same line. Sure, she could have written two different
<code>import</code> directives, but she had been promised a concise programming language and it
was about time it delivered.</p>

<h1 id="toc_3">Corgi Ever Watching</h1>

<p>Now that the program was polite, our programmer felt good enough to take a
small break. As she was looking out the window, waiting for her 3rd cup of
nocturnal coffee to brew, it came to her: &ldquo;Wait a minute&hellip; what good is my
program if I have to keep running it manually?&rdquo;</p>

<p>A quick sip out of her coffee cup finished to clear her mind completely.
&ldquo;I am going to need some sort of loop. And I think watchcorgi should shut
up if everything is fine, and only complain if something goes wrong.&rdquo;</p>

<p>As she looked at her timer, waiting for it to run out and allow her to go back
to hacking (self-discipline is important, after all), she came to a second
realization: that there were two main tasks in her program - the checking, and
the notifying. Surely there must be some way to write that in a more modular
way?</p>

<p>She decided to go for broke, and split her program into three different ooc
modules. She started with <code>source/watchcorgi/checker.ooc</code>:</p>

<pre><code>#!ooc
import os/[Process]

Checker: class {
  url: String

  init: func (=url)

  /**
   * @return true if the url is reachable, false otherwise
   */
  check: func -&gt; Bool {
    0 == Process new([&quot;curl&quot;, &quot;-I&quot;, url]) execute()
  }
}
</code></pre>

<p>Then went on with <code>source/watchcorgi/notifier.ooc</code>:</p>

<pre><code>#!ooc
import os/[Terminal]

Notifier: class {
  quiet: Bool

  init: func

  notify: func (online: Bool, url: String) {
    if (online) {
      if (quiet) return

      Terminal setFgColor(Color green)
      &quot;[ OK  ] %s is online.&quot; printfln(url)
      Terminal reset()
    } else {
      Terminal setFgColor(Color red)
      &quot;[ERROR] %s is not reachable! You may panic now.&quot; printfln(url)
      Terminal reset()
    }
  }
}
</code></pre>

<p>And finally, thought it was better to rewrite <code>source/watchcorgi.ooc</code> from
scratch using those new modules:</p>

<pre><code>#!ooc
import watchcorgi/[checker, notifier]
import os/Time

notifier := Notifier new()
notifier quiet = true // only bother me if something goes wrong
checker := Checker new(&quot;http://example.org/&quot;)

while (true) {
  notifier notify(checker check(), checker url)
  Time sleepSec(5)
}
</code></pre>

<p>There. All good. Not only was her program now constantly vigilant, checking
for potential problems every five seconds, she felt that the various components
were just as flexible as needed, small enough, and that it made the main program
file short and sweet.</p>

<h1 id="toc_4">The Littlest Things</h1>

<p>There was one area of the code she wasn&rsquo;t entirely happy with - in the
notifier, she was using the same pattern twice. First <code>Terminal setFgColor</code>,
then <code>String printfln</code>, then <code>Terminal reset</code>.  She decided to extract that
pattern into a function instead, and added it to the end of the the <code>Notifier</code>
class definition:</p>

<pre><code>#!ooc
say: func (color: Color, message: String) {
  Terminal setFgColor(color)
  message println()
  Terminal reset()
}
</code></pre>

<p>With that new neighbor, the notify function was happy to be reduced to:</p>

<pre><code>#!ooc
notify: (online: Bool, url: String) {
  if (online) {
    if (quiet) return
    say(Color green, &quot;[ OK  ] %s is online&quot; format(url))
  } else {
    say(Color red, &quot;[ERROR] %s is not reachable! You may panic now.&quot; \
      format(url))
  }
}
</code></pre>

<p>While this was better, she wasn&rsquo;t satisfied yet - calling <code>format</code> like this
(she thought of it as a version of <code>printfln</code> that returned the formatted string
instead of printing it) wasn&rsquo;t particularly pretty.</p>

<p>Like with everything that bothered her, she decided to do something about it:</p>

<pre><code>#!ooc
say: func (color: Color, message: String, args: ...) {
  Terminal setFgColor(color)
  message printfln(args)
  Terminal reset()
}

notify: func (online: Bool, url: String) {
  if (online) {
    if (quiet) return
    say(Color green, &quot;[ OK  ] %s is online&quot;, url)
  } else {
    say(Color red, &quot;[ERROR] %s is not reachable! You may panic now.&quot;, url)
  }
}
</code></pre>

<p>It was subtle, but for her, it made all the difference. Being able to relay
any number of arguments like that? This language might actually be comfortable
after all.</p>

<h1 id="toc_5">All Together Now</h1>

<p>&ldquo;So, that was nice. For the life of me, I can&rsquo;t think of a single thing my program
is missing.&rdquo; Her eyes closed gently, and she leaned back, as if overwhelmed by bliss.</p>

<p>Wait. Her eyes, suddenly inquisitive, were perfectly open now. &ldquo;What if I want
to monitor several websites? Then I would need a config file so that I could modify
the list of websites to monitor&hellip; and it would need to check them in parallel, so
it doesn&rsquo;t get stuck on any one of them.&rdquo;</p>

<p>She decided she needed one more module: <code>source/watchcorgi/config.ooc</code>:</p>

<pre><code>#!ooc
import io/File
import os/Env
import structs/List
import text/StringTokenizer

DEFAULT_PATH := Env get(&quot;HOME&quot;) + &quot;/.config/corgirc&quot;

Config: class {
  websites: List&lt;String&gt;

  init: func (path := DEFAULT_PATH) {
    content := File new(path) read()
    websites = content split('\n') \
               map(|line| line trim(&quot;\t &quot;)) \
               filter(|line| !line empty?())
  }
}
</code></pre>

<p>Armed with that new weapon, checking multiple websites in parallel was just a
matter of making threads behave. Since she didn&rsquo;t have much experience in the
domain, and the documentation seemed a little bit obscure, she decided to ask
for help in the <a href="https://groups.google.com/group/ooc-lang">ooc discussion group</a></p>

<p>Almost immediately, a response sprung with numerous code examples she could use
as inspiration for her own endeavor. And so she embarked courageously,
rewriting <code>source/watchcorgi.ooc</code> once again:</p>

<pre><code>#!ooc
import watchcorgi/[config, checker, notifier]
import os/Time
import threading/Thread
import structs/[ArrayList]

threads := ArrayList&lt;Thread&gt; new()
config := Config new()

for (url in config websites) {
  threads add(Thread new(||
    guard := Guard new(url, 5)
    guard run()
  ))
}

// start all the threads
for (thread in threads) {
  thread start()
}

// wait for all threads to complete
threads each(|thread| thread wait())

Guard: class {
    delay: Int
    checker: Checker
    notifier: Notifier

    init: func (url: String, =delay) {
      checker = Checker new(url)
      notifier = Notifier new()
      notifier quiet = true
    }

    run: func {
      while (true) {
        notifier notify(checker check(), checker url)
        Time sleepSec(delay)
      }
    }
}
</code></pre>

<p>As she began to write down a list of websites to check in <code>~/.config/corgirc</code>,
she started to list the new things she had learned during that last refactoring:</p>

<ul>
<li><p>That classes can be used before they are defined - in order word, the order
in which classes are defined does not matter!</p></li>

<li><p>That threads, while really old fashioned, were quite easy to use - all you
had to do was create a new <code>Thread</code> object and pass a function that takes
zero arguments.</p></li>

<li><p>That some functions are anonymous - and that they can be defined as an
argument to a function call like this: <code>[1, 2, 3] reduce(|a, b| a + b)</code></p></li>

<li><p>That using a foreach, such as <code>for (element in iterable) { /* code */ }</code> or
using the each method, like so <code>iterable each(|element| /* code */ )</code>, where
pretty much equivalent.</p></li>
</ul>

<h1 id="toc_6">When Features Creep</h1>

<p>As magnificent as the program was, she couldn&rsquo;t shake an eerie feeling. It
seemed so perfect, so concise, so damn practical - what could possibly go
wrong?</p>

<p>&ldquo;Oh, right!&rdquo; she whispered. The program assumes that the <code>curl</code> command-line
utility is installed and in the <code>$PATH</code>. While on most Linux distributions,
that&rsquo;s a safe bet, it might not be there on OSX. Or, god forbid, on Windows.</p>

<p>But it was almost 6AM, and rays of sunlight would soon come and disturb the
oh so peaceful (yet eventful) night of coding. Obviously, she could not afford
to write her own HTTP library.</p>

<p>Sure, in theory, a simple usage of <code>net/TCPSocket</code> from the SDK, writing
something like</p>

<pre><code>HEAD / HTTP/1.0\r\n\r\n
</code></pre>

<p>..and seeing if you get a non-empty response, would suffice. But what about
parsing empty, yet worrying responses, like an HTTP 404, or an HTTP 502? What
about HTTP 1.1 and the Host header, essential when several websites are running
on the same IP address? And most importantly, what about HTTPS, which runs on a
different port, and what&rsquo;s more, over SSL?</p>

<p>No, definitely, writing an HTTP library was not part of the plan. But maybe
there was something she could use&hellip; maybe curl existed also as a library. A
quick search for <code>ooc curl</code> revealed the existence of
<a href="https://github.com/nddrylliog/ooc-curl">nddrylliog/ooc-curl</a>. Jackpot!</p>

<p>A quick clone and.. wait. She knew better. Why not use <a href="/docs/tools/sam/">sam</a> instead?
A simple <code>sam clone curl</code> would suffice. Or, better yet, she could add the
dependency in the .use file, and run <code>sam get</code> from the watchcorgi folder
afterwards.</p>

<p>Her .use file now looked a little bit like this:</p>

<pre><code>#!yaml
Name: Watch Corgi
Description: Multi-threaded website monitoring system
Version: 0.2.0

SourcePath: source
Main: watchcorgi
Requires: curl
</code></pre>

<p>And sure enough, after <code>sam get</code>, she saw the <code>ooc-curl</code> folder appear in her
<code>$OOC_LIBS</code> directory. It was time to rewrite <code>source/watchcorgi/checker.ooc</code>:</p>

<pre><code>#!ooc
use curl
import curl/Highlevel

Checker: class {
    url: String

    init: func (=url)

    /**
     * @return true if the url is reachable, false otherwise
     */
    check: func -&gt; Bool {
      200 == (HTTPRequest new(url). perform(). getResponseCode())
    }
}
</code></pre>

<p>This piece of code was one of her favorites yet. She had used one of the
features she had just learned about - call chaining. &ldquo;In fact&rdquo;, she would
later explain to a colleague, &ldquo;you can think of the dot as a comma - it
separates several method calls, but they all happen on the same object,
sequentially&rdquo;.</p>

<p>Recompiling the program after this change was exciting. There was no
configuration dialog to fill out. No complicated command-line option to add
when compiling. As a matter of fact, the single line added to the use file was
enough to make sam happy - and rock itself seemed pretty content with the <code>use
curl</code> directive now sitting at the top of the checker module.</p>

<p>A simple <code>rock -v</code> did the trick. And there she had it. The perfect website
monitoring system. At last. Oh, sure, part of her brain fully realized that
the impression of perfectness would fade out over the days, but as far as
discovering a new language goes, she thought this was a pretty good run.</p>

<p>There was just one thing left to do&hellip;</p>

<h1 id="toc_7">To Give Back</h1>

<p>At this point, she felt that watchcorgi it was worth it to publish her program
somewhere. Of course, all along, she had been keeping track of it using
<a href="http://git-scm.org/">git</a>. In this case, she was using <a href="https://github.com/">GitHub</a> as a host.</p>

<p>She decided to make it easy for other people who might want to use
<code>watchcorgi</code>, to get it. After a quick search, it quickly became evident that
the process itself was trivial. She just had to send a pull request to the
<a href="https://github.com/nddrylliog/sam">sam repository</a> that added a formula for her new pet project.</p>

<p>So, after forking sam on GitHub, changing the origin of her sam repository,
she opened a new file in <code>$OOC_LIBS/sam/library/watchcorgi.yml</code>, and wrote:</p>

<pre><code>#!yaml
Origin: https://github.com/example/watchcorgi.git
</code></pre>

<p>And then, she <a href="https://help.github.com/articles/creating-a-pull-request">submitted the pull request</a>. The sun was rising.
It felt warm. I think - she thought - I just might like it here.</p>

			</article>
		</main>
		<footer>
  <p></p>
</footer>

	</body>
</html>
