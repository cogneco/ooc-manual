<!DOCTYPE html>
<html>
	<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	<title> net &middot; The OOC Manual </title>
	
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/reset.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/text.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/color.css">
	<link rel="stylesheet" href="http://oocmanual.cogneco.com/css/layout.css">
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://oocmanual.cogneco.com/apple-touch-icon-144-precomposed.png">
	<link rel="shortcut icon" href="http://oocmanual.cogneco.com/favicon.ico">
	
	<link href="" rel="alternate" type="application/rss+xml" title="The OOC Manual" />
</head>

	<body>
		<header>
  <h1><a href="http://oocmanual.cogneco.com">The OOC Manual</a></h1>
  <p></p>
</header>

		<nav>
	<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/introduction">Introduction</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language">Language</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/modules">Modules</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/values">Values</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/tuples">Tuples</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/control-structures">Control Structures</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/collections">Collections</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/functions">Functions</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/first-class-functions">First-class Functions</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/classes">Classes</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/constructors">Constructors</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/properties">Properties</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/operators">Operators</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/covers">Covers</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/covers-vs-classes">Covers vs Classes</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/enumerations">Enumerations</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/generics">Generics</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/generics2">Generics 2</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/exceptions">Exceptions</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/preprocessor">Preprocessor</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/language/version-blocks">Version</a>
		
	</li>
	
</ul>


		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools">Tools</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock">Rock</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/basic">Basic Usage</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/drivers">Drivers</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/advanced">Advanced Usage</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/use-files">Use-files</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/use-files2">Use-files 2</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/gc">Garbage Collection</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/debug">Debugging</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/rock/packaging">Packaging</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/sam">Sam</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/tools/editors">Editors</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/troubleshooting">Troubleshooting</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk">sdk</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang">lang</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/types">types</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/string">string</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/numbers">numbers</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/iterators">iterators</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/exceptions">exception</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/lang/memory">memory</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/structs">structs</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/io">io</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/math">math</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os">os</a>
		
		<ul>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/process">process</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/jobpool">jobpool</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/coro">coro</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/terminal">terminal</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/pipe">pipe</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/dynlib">dynlib</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/mmap">mmap</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/channel">channel</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/system">system</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/env">env</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/shellutils">shellutils</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/os/time">time</a>
		
	</li>
	
</ul>


		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/net">net</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/text">text</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/threading">threading</a>
		
	</li>
	
	<li>
		<a href="http://oocmanual.cogneco.com/sdk/native">native</a>
		
	</li>
	
</ul>


		
	</li>
	
</ul>


</nav>


		<main>
			<header>
				<h1>net</h1>
			</header>
			<nav id="TableOfContents">
<ul>
<li><a href="#toc_0">The net package</a></li>
<li><a href="#toc_1">TCP</a>
<ul>
<li><a href="#toc_2">ServerSocket</a></li>
<li><a href="#toc_3">TCPSocket</a></li>
</ul></li>
<li><a href="#toc_4">UDP</a>
<ul>
<li><a href="#toc_5">UDPSocket</a></li>
</ul></li>
</ul>
</nav>
			<article>
				

<h1 id="toc_0">The net package</h1>

<p>When you want to deal with TCP and UDP sockets directly, the <code>net</code> package is
here for you.</p>

<h1 id="toc_1">TCP</h1>

<p>TCP guarantees that packets arrive eventually, and that they arrive in the
order in which they were sent.</p>

<p>Usually, on the server side, sockets are bound to a port, and then listen.
When clients attempt to connect, they accept connections (and can later
close them if so they wish).</p>

<p>Accepting a connection via a server socket gives a TCPSocket - so, after
a client has connected, the client and the server use the same data structure
to communicate.</p>

<p>A Socket, like a <code>TCPSocket</code>, has a reader / writer pair, since sockets
are bidirectional communication channels. Which means they can write data
to the writer, and read data from the reader.</p>

<p>For more info on readers and writers, go ahead and read (heh) the documentation
on the <a href="/docs/sdk/io/">io package</a></p>

<h2 id="toc_2">ServerSocket</h2>

<p>Here&rsquo;s an example usage of ServerSocket serving as a makeshift HTTP
server (don&rsquo;t do that, though):</p>

<pre><code>#!ooc
import net/[ServerSocket]

socket := ServerSocket new(&quot;0.0.0.0&quot;, 8000)
socket listen()
&quot;Listening...&quot; println()

while(true) {
    conn := socket accept()
    &quot;Got a connection!&quot; println()

    while (conn in readLine() trim() != &quot;&quot;) {
      // read the request
    }

    conn out write(&quot;HTTP/1.1 200 OK\r\n&quot;)
    conn out write(&quot;Content-Type: text/html\r\n&quot;)
    conn out write(&quot;\r\n&quot;)
    conn out write(&quot;&lt;html&gt;&lt;body&gt;\
      Hello, from the ooc socket world!&lt;/body&gt;&lt;/html&gt;&quot;)
    conn out write(&quot;\r\n&quot;)
    conn close()
}
</code></pre>

<p>Don&rsquo;t forget to call <code>listen()</code> before trying to <code>accept()</code> connections.</p>

<h2 id="toc_3">TCPSocket</h2>

<p>Same as the ServerSocket, but on the client side. Make requests like
that (or don&rsquo;t - use a proper HTTP library):</p>

<pre><code>#!ooc
import net/[TCPSocket]

socket := TCPSocket new(&quot;ooc-lang.org&quot;, 80)
socket connect()
socket out write(&quot;GET / HTTP/1.1\n&quot;)
socket out write(&quot;Host: ooc-lang.org\n&quot;)
socket out write(&quot;User-Agent: An anonymous admirer\n&quot;)
socket out write(&quot;\n\n&quot;)

line := socket in readLine()
&quot;We got a response! %s&quot; printfln(line)
</code></pre>

<p>Seriously. Use a proper HTTP library. But that&rsquo;s an example.</p>

<p>Also, don&rsquo;t forget to call <code>connect()</code> before attempting to use <code>out</code>
or <code>in</code>.</p>

<h1 id="toc_4">UDP</h1>

<p>Unlike TCP, UDP is unidirectional - some sockets bind and only get to
receive, and some sockets don&rsquo;t bind and can only send.</p>

<p>There&rsquo;s also no guarantee that anything sent over UDP ever arrives, and
order is not guaranteed either.</p>

<h2 id="toc_5">UDPSocket</h2>

<p>When you create an <code>UDPSocket</code>, always specify a hostname (or an ip) and a port, like this:</p>

<pre><code>#!ooc
socket := UDPSocket new(&quot;localhost&quot;, 5000)
</code></pre>

<p>If you want to receive datagrams, call bind():</p>

<pre><code>#!ooc
socket bind()

while (true) {
  buffer := socket receive(128)
  buffer toString() println()
}
</code></pre>

<p>If you want to send datagrams, just call send:</p>

<pre><code>#!ooc
socket send(&quot;udp is fun&quot;)
</code></pre>

<p>That&rsquo;s about it for now.</p>

			</article>
		</main>
		<footer>
  <p></p>
</footer>

	</body>
</html>
